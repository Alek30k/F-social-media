(this.webpackJsonpnew=this.webpackJsonpnew||[]).push([[0],{100:function(e,t,s){},101:function(e,t,s){},102:function(e,t,s){},103:function(e,t,s){},104:function(e,t,s){},109:function(e,t,s){},110:function(e,t,s){},111:function(e,t,s){},112:function(e,t,s){},113:function(e,t,s){},114:function(e,t,s){},115:function(e,t,s){},116:function(e,t,s){},117:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s.n(a),r=s(50),n=s.n(r),i=s(21),o=s(10),l=(s(84),s(132)),j=s(133),u=s(134),d=s(135),b=s(136),m=s(137),p=s(138),h=s(139),O=s(140),x=[{id:1,profilePicture:"person/1.jpeg",username:"Safak Kocaoglu"},{id:2,profilePicture:"person/2.jpeg",username:"Janell Shrum"},{id:3,profilePicture:"person/3.jpeg",username:"Alex Durden"},{id:4,profilePicture:"person/4.jpeg",username:"Dora Hawks"},{id:5,profilePicture:"person/5.jpeg",username:"Thomas Holden"},{id:6,profilePicture:"person/6.jpeg",username:"Shirley Beauchamp"},{id:7,profilePicture:"person/7.jpeg",username:"Travis Bennett"},{id:8,profilePicture:"person/8.jpeg",username:"Kristen Thomas"},{id:9,profilePicture:"person/9.jpeg",username:"Gary Duty"},{id:10,profilePicture:"person/10.jpeg",username:"Safak Kocaoglu"}],f=(s(85),s(0));function v(e){var t=e.user;return Object(f.jsxs)("li",{className:"sidebarFriend",children:[Object(f.jsx)("img",{className:"sidebarFriendImg",src:"https://feisbuk.onrender.com/images/"+t.profilePicture,alt:""}),Object(f.jsx)("span",{className:"sidebarFriendName",children:t.username})]})}function g(){return Object(f.jsx)("div",{className:"sidebar",children:Object(f.jsxs)("div",{className:"sidebarWrapper",children:[Object(f.jsxs)("ul",{className:"sidebarList",children:[Object(f.jsxs)("li",{className:"sidebarListItem",children:[Object(f.jsx)(l.a,{className:"sidebarIcon"}),Object(f.jsx)("span",{className:"sidebarListItemText",children:"Feed"})]}),Object(f.jsxs)("li",{className:"sidebarListItem",children:[Object(f.jsx)(j.a,{className:"sidebarIcon"}),Object(f.jsx)("span",{className:"sidebarListItemText",children:"Chats"})]}),Object(f.jsxs)("li",{className:"sidebarListItem",children:[Object(f.jsx)(u.a,{className:"sidebarIcon"}),Object(f.jsx)("span",{className:"sidebarListItemText",children:"Videos"})]}),Object(f.jsxs)("li",{className:"sidebarListItem",children:[Object(f.jsx)(d.a,{className:"sidebarIcon"}),Object(f.jsx)("span",{className:"sidebarListItemText",children:"Groups"})]}),Object(f.jsxs)("li",{className:"sidebarListItem",children:[Object(f.jsx)(b.a,{className:"sidebarIcon"}),Object(f.jsx)("span",{className:"sidebarListItemText",children:"Bookmarks"})]}),Object(f.jsxs)("li",{className:"sidebarListItem",children:[Object(f.jsx)(m.a,{className:"sidebarIcon"}),Object(f.jsx)("span",{className:"sidebarListItemText",children:"Questions"})]}),Object(f.jsxs)("li",{className:"sidebarListItem",children:[Object(f.jsx)(p.a,{className:"sidebarIcon"}),Object(f.jsx)("span",{className:"sidebarListItemText",children:"Jobs"})]}),Object(f.jsxs)("li",{className:"sidebarListItem",children:[Object(f.jsx)(h.a,{className:"sidebarIcon"}),Object(f.jsx)("span",{className:"sidebarListItemText",children:"Events"})]}),Object(f.jsxs)("li",{className:"sidebarListItem",children:[Object(f.jsx)(O.a,{className:"sidebarIcon"}),Object(f.jsx)("span",{className:"sidebarListItemText",children:"Courses"})]})]}),Object(f.jsx)("button",{className:"sidebarButton",children:"Show More"}),Object(f.jsx)("hr",{className:"sidebarHr"}),Object(f.jsx)("ul",{className:"sidebarFriendList",children:x.map((function(e){return Object(f.jsx)(v,{user:e},e.id)}))})]})})}var N=s(4),I=s.n(N),k=s(8),w=s(6),y=(s(90),s(141)),C=s(7),L=s(61),S=s(48),F=s(34),_=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"LOGOUT":return{user:null,isFetching:!1,error:!1};case"FOLLOW":return Object(F.a)(Object(F.a)({},e),{},{user:Object(F.a)(Object(F.a)({},e.user),{},{followings:[].concat(Object(S.a)(e.user.followings),[t.payload])})});case"UNFOLLOW":return Object(F.a)(Object(F.a)({},e),{},{user:Object(F.a)(Object(F.a)({},e.user),{},{followings:e.user.followings.filter((function(e){return e!==t.payload}))})});default:return e}},T={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},P=Object(a.createContext)(T),B=function(e){var t=e.children,s=Object(a.useReducer)(_,T),c=Object(w.a)(s,2),r=c[0],n=c[1];return Object(a.useEffect)((function(){localStorage.setItem("user",JSON.stringify(r.user))}),[r.user]),Object(f.jsx)(P.Provider,{value:{user:r.user,isFetching:r.isFetching,error:r.error,dispatch:n},children:t})};function R(e){var t=e.post,s=Object(a.useState)(t.likes.length),c=Object(w.a)(s,2),r=c[0],n=c[1],o=Object(a.useState)(!1),l=Object(w.a)(o,2),j=l[0],u=l[1],d=Object(a.useState)({}),b=Object(w.a)(d,2),m=b[0],p=b[1],h="https://feisbuk.onrender.com/images/",O=Object(a.useContext)(P).user;Object(a.useEffect)((function(){u(t.likes.includes(O._id))}),[O._id,t.likes]),Object(a.useEffect)((function(){(function(){var e=Object(k.a)(I.a.mark((function e(){var s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("https://feisbuk.onrender.com/api/users?userId=".concat(t.userId));case 2:s=e.sent,p(s.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t.userId]);var x=function(){try{C.a.put("https://feisbuk.onrender.com/api/posts/"+t._id+"/like",{userId:O._id})}catch(e){}n(j?r-1:r+1),u(!j)};return Object(f.jsx)("div",{className:"post",children:Object(f.jsxs)("div",{className:"postWrapper",children:[Object(f.jsxs)("div",{className:"postTop",children:[Object(f.jsxs)("div",{className:"postTopLeft",children:[Object(f.jsx)(i.b,{to:"profile/".concat(m.username),children:Object(f.jsx)("img",{className:"postProfileImg",src:(null===m||void 0===m?void 0:m.profilePicture)||"https://i.ibb.co/MBtjqXQ/no-avatar.gif",alt:""})}),Object(f.jsx)("span",{className:"postUsername",children:m.username}),Object(f.jsx)("span",{className:"postDate",children:Object(L.a)(t.createdAt)})]}),Object(f.jsx)("div",{className:"postTopRight",children:Object(f.jsx)(y.a,{})})]}),Object(f.jsxs)("div",{className:"postCenter",children:[Object(f.jsx)("span",{className:"postText",children:null===t||void 0===t?void 0:t.desc}),Object(f.jsx)("img",{className:"postImg",src:h+t.img,alt:""})]}),Object(f.jsxs)("div",{className:"postBottom",children:[Object(f.jsxs)("div",{className:"postBottomLeft",children:[Object(f.jsx)("img",{className:"likeIcon",src:"".concat(h,"like.png"),alt:"",onClick:x}),Object(f.jsx)("img",{className:"likeIcon",src:"".concat(h,"heart.png"),alt:"",onClick:x}),Object(f.jsx)("div",{className:"likeCount",children:r}),Object(f.jsx)("span",{className:"postLikeCounter",children:" people like it"})]}),Object(f.jsx)("div",{className:"postButtomRight",children:Object(f.jsxs)("span",{className:"postCommentText",children:[t.comment," comments"]})})]})]})})}s(100);var E=s(142),U=s(143),D=s(144),A=s(145),M=s(146);function W(){var e=Object(a.useContext)(P).user,t=Object(a.useRef)(),s=Object(a.useState)(null),c=Object(w.a)(s,2),r=c[0],n=c[1],i=function(){var s=Object(k.a)(I.a.mark((function s(a){var c,n,i;return I.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(a.preventDefault(),c={userId:e._id,desc:t.current.value},!r){s.next=16;break}return n=new FormData,i=Date.now()+r.name,n.append("name",i),n.append("file",r),c.img=i,console.log(c),s.prev=9,s.next=12,C.a.post("https://feisbuk.onrender.com/api/upload",n);case 12:s.next=16;break;case 14:s.prev=14,s.t0=s.catch(9);case 16:return s.prev=16,s.next=19,C.a.post("https://feisbuk.onrender.com/api/posts",c);case 19:window.location.reload(),s.next=24;break;case 22:s.prev=22,s.t1=s.catch(16);case 24:case"end":return s.stop()}}),s,null,[[9,14],[16,22]])})));return function(e){return s.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"share",children:Object(f.jsxs)("div",{className:"shareWrapper",children:[Object(f.jsxs)("div",{className:"shareTop",children:[Object(f.jsx)("img",{className:"shareProfileImg",src:(null===e||void 0===e?void 0:e.profilePicture)||"https://i.ibb.co/MBtjqXQ/no-avatar.gif",alt:""}),Object(f.jsx)("input",{placeholder:"What's in your mind "+e.username+"?",className:"shareInput",ref:t})]}),Object(f.jsx)("hr",{className:"shareHr"}),r&&Object(f.jsxs)("div",{className:"shareImgContainer",children:[Object(f.jsx)("img",{className:"shareImg",src:URL.createObjectURL(r),alt:""}),Object(f.jsx)(E.a,{className:"shareCancelImg",onClick:function(){return n(null)}})]}),Object(f.jsxs)("form",{className:"shareBottom",onSubmit:i,children:[Object(f.jsxs)("div",{className:"shareOptions",children:[Object(f.jsxs)("label",{htmlFor:"file",className:"shareOption",children:[Object(f.jsx)(U.a,{htmlColor:"tomato",className:"shareIcon"}),Object(f.jsx)("span",{className:"shareOptionText",children:"Photo or Video"}),Object(f.jsx)("input",{style:{display:"none"},type:"file",id:"file",accept:".png,.jpeg,.jpg",onChange:function(e){return n(e.target.files[0])}})]}),Object(f.jsxs)("div",{className:"shareOption",children:[Object(f.jsx)(D.a,{htmlColor:"blue",className:"shareIcon"}),Object(f.jsx)("span",{className:"shareOptionText",children:"Tag"})]}),Object(f.jsxs)("div",{className:"shareOption",children:[Object(f.jsx)(A.a,{htmlColor:"green",className:"shareIcon"}),Object(f.jsx)("span",{className:"shareOptionText",children:"Location"})]}),Object(f.jsxs)("div",{className:"shareOption",children:[Object(f.jsx)(M.a,{htmlColor:"goldenrod",className:"shareIcon"}),Object(f.jsx)("span",{className:"shareOptionText",children:"Feelings"})]})]}),Object(f.jsx)("button",{className:"shareButton",type:"submit",children:"Share"})]})]})})}s(101);function q(e){var t=e.username,s=Object(a.useState)([]),c=Object(w.a)(s,2),r=c[0],n=c[1],i=Object(a.useContext)(P).user;return Object(a.useEffect)((function(){(function(){var e=Object(k.a)(I.a.mark((function e(){var s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,C.a.get("https://feisbuk.onrender.com/api/posts/profile/"+t);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,C.a.get("https://feisbuk.onrender.com/api/posts/timeline/"+i._id);case 8:e.t0=e.sent;case 9:s=e.t0,n(s.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,i._id]),Object(f.jsx)("div",{className:"feed",children:Object(f.jsxs)("div",{className:"feedWrapper",children:[(!t||t===i.username)&&Object(f.jsx)(W,{}),r.map((function(e){return Object(f.jsx)(R,{post:e},e._id)}))]})})}s(102),s(103);function G(e){var t=e.user;return Object(f.jsxs)("li",{className:"rightbarFriend",children:[Object(f.jsxs)("div",{className:"rightbarProfileImgContainer",children:[Object(f.jsx)("img",{src:"https://feisbuk.onrender.com/images/"+t.profilePicture,alt:"",className:"rightbarProfileImg"}),Object(f.jsx)("span",{className:"rightbarOnline"})]}),Object(f.jsx)("span",{className:"rightbarUsername",children:t.username})]})}var Q=s(147),V=s(148);function X(e){var t=e.user,s=Object(a.useState)([]),c=Object(w.a)(s,2),r=c[0],n=c[1],o=Object(a.useContext)(P),l=o.user,j=o.dispatch,u=Object(a.useState)(l.followings.includes(null===t||void 0===t?void 0:t.id)),d=Object(w.a)(u,2),b=d[0],m=d[1];Object(a.useEffect)((function(){(function(){var e=Object(k.a)(I.a.mark((function e(){var s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("https://feisbuk.onrender.com/api/users/friends/"+t._id);case 3:s=e.sent,n(s.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[t]);var p=function(){var e=Object(k.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!b){e.next=7;break}return e.next=4,C.a.put("https://feisbuk.onrender.com/api/users/".concat(t._id,"/unfollow"),{userId:l._id});case 4:j({type:"UNFOLLOW",payload:t._id}),e.next=10;break;case 7:return e.next=9,C.a.put("https://feisbuk.onrender.com/api/users/".concat(t._id,"/follow"),{userId:l._id});case 9:j({type:"FOLLOW",payload:t._id});case 10:m(!b),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),h=function(){return Object(f.jsxs)("div",{className:"rightbarContainer",children:[Object(f.jsxs)("div",{className:"birthdayContainer",children:[Object(f.jsx)("img",{className:"birthdayImg",src:"/assets/gift.png",alt:""}),Object(f.jsxs)("span",{className:"birthdayText",children:[Object(f.jsx)("b",{children:"Paola Foster"})," and ",Object(f.jsx)("b",{children:"3 other friends"})," hav a birthday today"]})]}),Object(f.jsx)("img",{className:"rightbarAd",src:"/assets/ad.png",alt:""}),Object(f.jsx)("h4",{className:"rightbarTitle",children:"Online Friends"}),Object(f.jsx)("ul",{className:"rightbarFriendList",children:null===x||void 0===x?void 0:x.map((function(e){return Object(f.jsx)(G,{user:e},e.id)}))})]})},O=function(){return Object(f.jsxs)("div",{className:"rightbarProfile",children:[t.username!==l.username&&Object(f.jsxs)("button",{className:"rightbarFollowButton",onClick:p,children:[b?"Unfollow":"Follow",b?Object(f.jsx)(Q.a,{}):Object(f.jsx)(V.a,{})]}),Object(f.jsx)("h4",{className:"rightbarTitle",children:"User information"}),Object(f.jsxs)("div",{className:"rightbarInfo",children:[Object(f.jsxs)("div",{className:"rightbarInfoItem",children:[Object(f.jsx)("span",{className:"rightbarInfoKey",children:"City:"}),Object(f.jsx)("span",{className:"rightbarInValue",children:null===t||void 0===t?void 0:t.city})]}),Object(f.jsxs)("div",{className:"rightbarInfoItem",children:[Object(f.jsx)("span",{className:"rightbarInfoKey",children:"From:"}),Object(f.jsx)("span",{className:"rightbarInValue",children:null===t||void 0===t?void 0:t.from})]}),Object(f.jsxs)("div",{className:"rightbarInfoItem",children:[Object(f.jsx)("span",{className:"rightbarInfoKey",children:"Relationship:"}),Object(f.jsx)("span",{className:"rightbarInValue",children:1===(null===t||void 0===t?void 0:t.relationship)?"Single":2===(null===t||void 0===t?void 0:t.relationship)?"Married":"-"})]})]}),Object(f.jsx)("h4",{className:"rightbarTitle",children:"User friends"}),Object(f.jsx)("div",{className:"rightbarFollowings",children:r.map((function(e){return Object(f.jsx)(i.b,{to:"/profile/"+e.username,style:{textDecoration:"none"},children:Object(f.jsxs)("div",{className:"rightbarFollowing",children:[Object(f.jsx)("img",{src:e.profilePicture||"https://i.ibb.co/MBtjqXQ/no-avatar.gif",alt:"",className:"rightbarFollowingImg"}),Object(f.jsx)("span",{className:"rightbarFollowingName",style:{textDecoration:"none",color:"black",marginTop:20},children:null===e||void 0===e?void 0:e.username})]})},e._id)}))})]})};return Object(f.jsx)("div",{className:"rightbar",children:Object(f.jsx)("div",{className:"rightbarWrapper",children:t?Object(f.jsx)(O,{}):Object(f.jsx)(h,{})})})}s(104);var J=s(149),K=s(150),H=s(151),z=s(76),Y=s.n(z);function Z(){var e=Object(a.useContext)(P),t=e.user,s=e.dispatch,c=Object(a.useState)(!1),r=Object(w.a)(c,2),n=r[0],l=r[1],u=Object(a.useState)(!1),d=Object(w.a)(u,2),b=d[0],m=d[1],p=Object(a.useState)([]),h=Object(w.a)(p,2),O=h[0],x=h[1],v=Object(o.g)();return Object(a.useEffect)((function(){(function(){var e=Object(k.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("https://feisbuk.onrender.com/api/users/alls");case 3:t=e.sent,x(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(f.jsxs)("div",{className:"topbarContainer",children:[Object(f.jsx)("div",{className:"topbarLeft",children:Object(f.jsx)(i.b,{to:"/",style:{textDecoration:"none"},children:Object(f.jsx)("span",{className:"logo",children:"Feisbuk"})})}),Object(f.jsx)("div",{className:"topbarCenter",children:Object(f.jsxs)("div",{className:"searchbar",children:[Object(f.jsx)(J.a,{className:"searchIcon"}),Object(f.jsx)("input",{placeholder:"Search on Feisbuk",className:"searchInput"})]})}),Object(f.jsxs)("div",{className:"topbarRight",children:[Object(f.jsxs)("div",{className:"topbarLinks",children:[Object(f.jsx)("span",{className:"topbarLink",children:"Homepage"}),Object(f.jsx)("span",{className:"topbarLink",children:"TimeLine"})]}),Object(f.jsxs)("div",{className:"topbarIcons",children:[Object(f.jsxs)("div",{className:"topbarIconItem",onClick:function(){m(!0)},children:[Object(f.jsx)(K.a,{}),Object(f.jsx)("span",{className:"topbarIconBadge",children:"1"})]}),Object(f.jsx)("div",{className:"modalFriends ".concat(b&&"modal-openFriends"),onClick:function(){m(!1)},children:Object(f.jsx)("div",{className:"modal__dialogg",onClick:function(e){e.stopPropagation()},children:Object(f.jsx)("div",{className:"avatarName",children:O.map((function(e){return Object(f.jsx)("div",{children:Object(f.jsx)(i.b,{to:"profile/".concat(e.username),style:{textDecoration:"none",color:"black"},children:Object(f.jsxs)("div",{className:"friends",children:[Object(f.jsx)("div",{className:"friendsImg",children:Object(f.jsx)("img",{src:e.profilePicture,alt:"",className:"topbarImg"})}),Object(f.jsx)("div",{children:e.username})]})})},e._id)}))})})}),Object(f.jsx)(i.b,{to:"/messenger",style:{textDecoration:"none",color:"white"},children:Object(f.jsxs)("div",{className:"topbarIconItem",children:[Object(f.jsx)(j.a,{}),Object(f.jsx)("span",{className:"topbarIconBadge",children:"2"})]})}),Object(f.jsxs)("div",{className:"topbarIconItem",children:[Object(f.jsx)(H.a,{}),Object(f.jsx)("span",{className:"topbarIconBadge",children:"1"})]})]}),Object(f.jsx)("div",{onClick:function(){l(!0)},className:"openModal",children:Object(f.jsx)("img",{src:(null===t||void 0===t?void 0:t.profilePicture)||"https://i.ibb.co/MBtjqXQ/no-avatar.gif",alt:"",className:"topbarImg"})}),Object(f.jsx)("div",{className:"modal ".concat(n&&"modal-open"),onClick:function(){l(!1)},children:Object(f.jsxs)("div",{className:"modal__dialog",onClick:function(e){e.stopPropagation()},children:[Object(f.jsx)(i.b,{to:"/profile/".concat(t.username),style:{textDecoration:"none",color:"rgb(26, 19, 19)",fontSize:18,fontWeight:500},children:Object(f.jsx)("div",{className:"avatarName",children:Object(f.jsx)("div",{className:"containerAvatar",children:Object(f.jsxs)("div",{children:[Object(f.jsx)("img",{src:(null===t||void 0===t?void 0:t.profilePicture)||"https://i.ibb.co/MBtjqXQ/no-avatar.gif",alt:"",className:"topbarImg"}),t.username]})})})}),n&&Object(f.jsxs)("div",{className:"modalAvatar",onClick:function(){s({type:"LOGOUT"}),v.push("/login")},children:[Object(f.jsx)(Y.a,{}),"Logout"]})]})})]})]})}s(109);function $(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Z,{}),Object(f.jsxs)("div",{className:"homeContainer",children:[Object(f.jsx)(g,{}),Object(f.jsx)(q,{}),Object(f.jsx)(X,{})]})]})}s(110);function ee(){var e="https://feisbuk.onrender.com/images/",t=Object(a.useState)({}),s=Object(w.a)(t,2),c=s[0],r=s[1],n=Object(o.h)().username;return Object(a.useEffect)((function(){(function(){var e=Object(k.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("https://feisbuk.onrender.com/api/users?username=".concat(n));case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Z,{}),Object(f.jsxs)("div",{className:"profile",children:[Object(f.jsx)(g,{}),Object(f.jsxs)("div",{className:"profileRight",children:[Object(f.jsxs)("div",{className:"profileRightTop",children:[Object(f.jsxs)("div",{className:"profileCover",children:[Object(f.jsx)("img",{className:"profileCoverImg",src:c.coverPicture?e+c.coverPicture:e+"person/noCover.png",alt:""}),Object(f.jsx)("img",{className:"profileUserImg",src:(null===c||void 0===c?void 0:c.profilePicture)||"https://i.ibb.co/MBtjqXQ/no-avatar.gif",alt:""})]}),Object(f.jsxs)("div",{className:"profileInfo",children:[Object(f.jsx)("h4",{className:"profileInfoName",children:c.username}),Object(f.jsx)("span",{className:"profileInfoDesc",children:c.desc})]})]}),Object(f.jsxs)("div",{className:"profileRightBottom",children:[Object(f.jsx)(q,{username:n}),Object(f.jsx)(X,{user:c})]})]})]})]})}s(111);var te=function(){var e=Object(k.a)(I.a.mark((function e(t,s){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"LOGIN_START"}),e.prev=1,e.next=4,C.a.post("https://feisbuk.onrender.com/api/auth/login",t);case 4:a=e.sent,s({type:"LOGIN_SUCCESS",payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"LOGIN_FAILURE",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,s){return e.apply(this,arguments)}}(),se=s(152);function ae(){var e=Object(a.useRef)(),t=Object(a.useRef)(),s=Object(a.useContext)(P),c=s.isFetching,r=s.dispatch,n=Object(o.g)();return Object(f.jsx)("div",{className:"login",children:Object(f.jsxs)("div",{className:"loginWrapper",children:[Object(f.jsxs)("div",{className:"loginLeft",children:[Object(f.jsx)("h3",{className:"loginLogo",children:"Feisbuk"}),Object(f.jsx)("span",{className:"loginDesc",children:"Connect with friends and the world around you on Feisbuk."})]}),Object(f.jsx)("div",{className:"loginRight",children:Object(f.jsxs)("form",{className:"loginBox",onSubmit:function(s){s.preventDefault(),te({email:e.current.value,password:t.current.value},r)},children:[Object(f.jsx)("input",{placeholder:"Email",required:!0,className:"loginInput",type:"email",ref:e}),Object(f.jsx)("input",{placeholder:"Password",type:"password",required:!0,minLength:"6",className:"loginInput",ref:t}),Object(f.jsx)("button",{className:"loginButton",type:"submit",disabled:c,children:c?Object(f.jsx)(se.a,{color:"white",size:"20px"}):"Log In"}),Object(f.jsx)("span",{className:"loginForgot",children:"Forgot Password?"}),Object(f.jsx)("button",{className:"loginRegisterButton",onClick:function(){n.push("/register")},children:c?Object(f.jsx)(se.a,{color:"white",size:"20px"}):"Create a New Account"})]})})]})})}s(112);function ce(){var e=Object(a.useRef)(),t=Object(a.useRef)(),s=Object(a.useRef)(),c=Object(a.useRef)(),r=Object(o.g)(),n=function(){var a=Object(k.a)(I.a.mark((function a(n){var i;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),c.current.value===s.current.value){a.next=5;break}s.current.setCustomValidity("Passwords don't match!"),a.next=15;break;case 5:return i={username:e.current.value,email:t.current.value,password:s.current.value},a.prev=6,a.next=9,C.a.post("https://feisbuk.onrender.com/api/auth/register",i);case 9:r.push("/login"),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(6),console.log(a.t0);case 15:case"end":return a.stop()}}),a,null,[[6,12]])})));return function(e){return a.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"register",children:Object(f.jsxs)("div",{className:"registerWrapper",children:[Object(f.jsxs)("div",{className:"registerLeft",children:[Object(f.jsx)("h3",{className:"registerLogo",children:"Feisbuk"}),Object(f.jsx)("span",{className:"registerDesc",children:"Connect with friends and the world around you on Feisbuk."})]}),Object(f.jsx)("div",{className:"registerRight",children:Object(f.jsxs)("form",{className:"registerBox",onSubmit:n,children:[Object(f.jsx)("input",{placeholder:"Username",required:!0,ref:e,className:"registerInput",type:"name"}),Object(f.jsx)("input",{placeholder:"Email",required:!0,ref:t,className:"registerInput",type:"email"}),Object(f.jsx)("input",{placeholder:"Password",required:!0,ref:s,className:"registerInput",type:"password",minLength:"6"}),Object(f.jsx)("input",{placeholder:"Password Again",required:!0,ref:c,className:"registerInput",type:"password"}),Object(f.jsx)("button",{className:"registerButton",type:"submit",children:"Sign Up"}),Object(f.jsx)("button",{className:"registerRegisterButton",onClick:function(){r.push("/login")},children:"Log into Account"})]})})]})})}s(113),s(114);function re(e){var t=e.conversation,s=e.currentUser,c=Object(a.useState)(null),r=Object(w.a)(c,2),n=r[0],i=r[1];return Object(a.useEffect)((function(){var e=t.members.find((function(e){return e!==s._id}));(function(){var t=Object(k.a)(I.a.mark((function t(){var s;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(C.a)("https://feisbuk.onrender.com/api/users?userId="+e);case 3:s=t.sent,i(s.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[s,t]),Object(f.jsxs)("div",{className:"conversation",children:[Object(f.jsx)("img",{className:"conversationImg",src:(null===n||void 0===n?void 0:n.profilePicture)||"https://i.ibb.co/MBtjqXQ/no-avatar.gif",alt:""}),Object(f.jsx)("span",{className:"conversationName",children:null===n||void 0===n?void 0:n.username})]})}s(115);function ne(e){var t=e.message,s=e.own;return Object(f.jsxs)("div",{className:s?"message own":"message",children:[Object(f.jsxs)("div",{className:"messageTop",children:[Object(f.jsx)("img",{src:"https://www.lavanguardia.com/files/content_image_mobile_filter/uploads/2018/07/25/5fa43c9755611.jpeg",alt:"",className:"messageImg"}),Object(f.jsx)("p",{className:"messageText",children:t.text})]}),Object(f.jsx)("div",{className:"messageBottom",children:Object(L.a)(t.createdAt)})]})}s(116);function ie(e){var t=e.onlineUsers,s=e.currentId,c=e.setCurrentChat,r=Object(a.useState)([]),n=Object(w.a)(r,2),i=n[0],o=n[1],l=Object(a.useState)([]),j=Object(w.a)(l,2),u=j[0],d=j[1],b="https://feisbuk.onrender.com/images/";Object(a.useEffect)((function(){(function(){var e=Object(k.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("https://feisbuk.onrender.com/api/users/friends/"+s);case 2:t=e.sent,o(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]),Object(a.useEffect)((function(){d(i.filter((function(e){return t.includes(e._id)})))}),[i,t]);var m=function(){var e=Object(k.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("https://feisbuk.onrender.com/api/conversations/find/".concat(s,"/").concat(t._id));case 3:a=e.sent,c(a.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"chatOnline",children:u.map((function(e){return Object(f.jsxs)("div",{className:"chatOnlineFriend",onClick:function(){return m(e)},children:[Object(f.jsxs)("div",{className:"chatOnlineImgContainer",children:[Object(f.jsx)("img",{className:"chatOnlineImg",src:(null===e||void 0===e?void 0:e.profilePicture)?b+e.profilePicture:b+"person/noAvatar.png",alt:""}),Object(f.jsx)("div",{className:"chatOnlineBadge"})]}),Object(f.jsx)("span",{className:"chatOnlineName",children:null===e||void 0===e?void 0:e.username})]})}))})}var oe=s(78);function le(){var e=Object(a.useState)([]),t=Object(w.a)(e,2),s=t[0],c=t[1],r=Object(a.useState)(null),n=Object(w.a)(r,2),i=n[0],o=n[1],l=Object(a.useState)([]),j=Object(w.a)(l,2),u=j[0],d=j[1],b=Object(a.useState)(""),m=Object(w.a)(b,2),p=m[0],h=m[1],O=Object(a.useState)(null),x=Object(w.a)(O,2),v=x[0],g=x[1],N=Object(a.useState)([]),y=Object(w.a)(N,2),L=y[0],F=y[1],_=Object(a.useRef)(),T=Object(a.useContext)(P).user,B=Object(a.useRef)();Object(a.useEffect)((function(){_.current=Object(oe.a)("ws://localhost:8900"),_.current.on("getMessage",(function(e){g({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[]),Object(a.useEffect)((function(){v&&(null===i||void 0===i?void 0:i.members.includes(v.sender))&&d((function(e){return[].concat(Object(S.a)(e),[v])}))}),[v,i]),Object(a.useEffect)((function(){_.current.emit("addUser",T._id),_.current.on("getUsers",(function(e){F(T.followings.filter((function(t){return e.some((function(e){return e.userId===t}))})))}))}),[T]),Object(a.useEffect)((function(){(function(){var e=Object(k.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("https://feisbuk.onrender.com/api/conversations/"+T._id);case 3:t=e.sent,c(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[T._id]),Object(a.useEffect)((function(){(function(){var e=Object(k.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("https://feisbuk.onrender.com/api/messages/"+(null===i||void 0===i?void 0:i._id));case 3:t=e.sent,d(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[i]);var R=function(){var e=Object(k.a)(I.a.mark((function e(t){var s,a,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s={sender:T._id,text:p,conversationId:i._id},a=i.members.find((function(e){return e!==T._id})),_.current.emit("sendMessage",{senderId:T._id,receiverId:a,text:p}),e.prev=4,e.next=7,C.a.post("https://feisbuk.onrender.com/api/messages",s);case 7:c=e.sent,d([].concat(Object(S.a)(u),[c.data])),h(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e;null===(e=B.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[u]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Z,{}),Object(f.jsxs)("div",{className:"messenger",children:[Object(f.jsx)("div",{className:"chatMenu",children:Object(f.jsxs)("div",{className:"chatMenuWrapper",children:[Object(f.jsx)("input",{placeholder:"Search for friends",className:"chatMenuInput"}),s.map((function(e){return Object(f.jsx)("div",{onClick:function(){return o(e)},children:Object(f.jsx)(re,{conversation:e,currentUser:T})},e._id)}))]})}),Object(f.jsx)("div",{className:"chatBox",children:Object(f.jsx)("div",{className:"chatBoxWrapper",children:i?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"chatBoxTop",children:u.map((function(e){return Object(f.jsx)("div",{ref:B,children:Object(f.jsx)(ne,{message:e,own:e.sender===T._id})})}))}),Object(f.jsxs)("div",{className:"chatBoxBottom",children:[Object(f.jsx)("textarea",{className:"chatMessageInput",placeholder:"write something...",onChange:function(e){return h(e.target.value)},value:p}),Object(f.jsx)("button",{className:"chatSubmitButton",onClick:R,children:"Send"})]})]}):Object(f.jsx)("span",{className:"noConversationText",children:"Open a conversation to start a chat."})})}),Object(f.jsx)("div",{className:"chatOnline",children:Object(f.jsx)("div",{className:"chatOnlineWrapper",children:Object(f.jsx)(ie,{onlineUsers:L,currentId:T._id,setCurrentChat:o})})})]})]})}var je=function(){var e=Object(a.useContext)(P).user;return Object(f.jsx)(i.a,{children:Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{exact:!0,path:"/",children:e?Object(f.jsx)($,{}):Object(f.jsx)(ae,{})}),Object(f.jsx)(o.b,{path:"/login",children:e?Object(f.jsx)(o.a,{to:"/"}):Object(f.jsx)(ae,{})}),Object(f.jsx)(o.b,{path:"/register",children:e?Object(f.jsx)(o.a,{to:"/"}):Object(f.jsx)(ce,{})}),Object(f.jsx)(o.b,{path:"/messenger",children:e?Object(f.jsx)(le,{}):Object(f.jsx)(o.a,{to:"/"})}),Object(f.jsx)(o.b,{path:"/profile/:username",children:Object(f.jsx)(ee,{})})]})})};n.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(B,{children:Object(f.jsx)(je,{})})}),document.getElementById("root"))},84:function(e,t,s){},85:function(e,t,s){},90:function(e,t,s){}},[[117,1,2]]]);
//# sourceMappingURL=main.32f397b4.chunk.js.map